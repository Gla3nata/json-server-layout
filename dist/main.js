(()=>{"use strict";const e=e=>{const t=document.getElementById("table-body");t.innerHTML="",e.forEach(e=>{t.insertAdjacentHTML("beforeend",`\n        <tr data-key="${e.id}">\n            <th scope="row">${e.id}</th>\n            <td>${e.name}</td>\n            <td>${e.email}</td>\n            <td>${e.children?"есть":"нет"}</td>\n            <td>\n                <div class="form-check form-switch">\n                    <input class="form-check-input" type="checkbox" role="switch"\n                        id="form-children" ${e.permissions?"checked":" "}>\n                </div>\n            </td>\n            <td>\n                <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">\n                    <button type="button" class="btn btn-warning">\n                        <i class="bi-pencil-square"></i>\n                    </button>\n                    <button type="button" class="btn btn-danger btn-remove">\n                        <i class="bi-person-x"></i>\n                    </button>\n                </div>\n            </td>\n        </tr>`)})};window.userService=new class{getUsers(){return fetch("http://localhost:4545/users").then(e=>e.json())}addUser(e){return fetch("http://localhost:4545/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json())}removeUser(e){return fetch(`http://localhost:4545/users/${e}`,{method:"DELETE"}).then(e=>e.json())}changeUser(e,t){return fetch(`http://localhost:4545/users/${e}`,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json())}},userService.getUsers().then(t=>{e(t)}),(()=>{const t=document.querySelector("form"),n=t.querySelector("#form-name"),s=t.querySelector("#form-email"),r=t.querySelector("#form-children");t.addEventListener("submit",t=>{t.preventDefault();const o={name:n.value,email:s.value,children:r.checked,permissions:!1};userService.addUser(o).then(()=>{userService.getUsers().then(t=>{e(t)})})})})(),document.getElementById("table-body").addEventListener("click",t=>{if(t.target.closest(".btn-remove")){const n=t.target.closest("tr").dataset.key;userService.removeUser(n).then(t=>{userService.getUsers().then(t=>{e(t)})})}}),document.getElementById("table-body").addEventListener("click",t=>{if(t.target.closest("input[type=checkbox]")){const n=t.target.closest("tr"),s=n.querySelector("input[type=checkbox]"),r=n.dataset.key;userService.changeUser(r,{permissions:s.checked}).then(t=>{userService.getUsers().then(t=>{e(t)})})}}),editUsers()})();